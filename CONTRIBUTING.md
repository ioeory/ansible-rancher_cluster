# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹æœ¬é¡¹ç›®çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ã€‚

## å¦‚ä½•è´¡çŒ®

### æŠ¥å‘Š Bug

å¦‚æœæ‚¨å‘ç° Bugï¼Œè¯·åœ¨ GitHub Issues ä¸­åˆ›å»ºæ–° Issueï¼Œå¹¶æä¾›ï¼š

1. **æ¸…æ™°çš„æ ‡é¢˜**
2. **è¯¦ç»†çš„æè¿°**
3. **é‡ç°æ­¥éª¤**
4. **é¢„æœŸè¡Œä¸º**
5. **å®é™…è¡Œä¸º**
6. **ç¯å¢ƒä¿¡æ¯**ï¼š
   - OS ç‰ˆæœ¬
   - Ansible ç‰ˆæœ¬
   - RKE2/K3S ç‰ˆæœ¬
   - ç›¸å…³æ—¥å¿—

### æå‡ºåŠŸèƒ½è¯·æ±‚

åœ¨ Issues ä¸­æè¿°ï¼š

1. **åŠŸèƒ½æè¿°**
2. **ä½¿ç”¨åœºæ™¯**
3. **ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½**
4. **å¯èƒ½çš„å®ç°æ–¹æ¡ˆ**

### æäº¤ä»£ç 

#### 1. Fork é¡¹ç›®

```bash
# Fork åˆ°ä½ çš„è´¦å·
# å…‹éš†ä½ çš„ Fork
git clone https://github.com/your-username/rke2-k3s-ansible.git
cd rke2-k3s-ansible

# æ·»åŠ ä¸Šæ¸¸ä»“åº“
git remote add upstream https://github.com/original-org/rke2-k3s-ansible.git
```

#### 2. åˆ›å»ºåˆ†æ”¯

```bash
# æ›´æ–°ä¸»åˆ†æ”¯
git checkout main
git pull upstream main

# åˆ›å»ºç‰¹æ€§åˆ†æ”¯
git checkout -b feature/amazing-feature
```

#### 3. å¼€å‘å’Œæµ‹è¯•

```bash
# ç¼–å†™ä»£ç 
# ...

# æµ‹è¯•
make lint
make test

# æäº¤
git add .
git commit -m "Add amazing feature"
```

#### 4. æäº¤ Pull Request

```bash
# æ¨é€åˆ°ä½ çš„ Fork
git push origin feature/amazing-feature

# åœ¨ GitHub ä¸Šåˆ›å»º Pull Request
```

## ä»£ç è§„èŒƒ

### Ansible æœ€ä½³å®è·µ

1. **ä½¿ç”¨æœ‰æ„ä¹‰çš„ä»»åŠ¡åç§°**
   ```yaml
   - name: å®‰è£…å¿…éœ€è½¯ä»¶åŒ… (Debian/Ubuntu)
     apt:
       name: [curl, wget]
   ```

2. **æ·»åŠ é€‚å½“çš„æ ‡ç­¾**
   ```yaml
   tags:
     - install
     - server
   ```

3. **ä½¿ç”¨å˜é‡è€Œä¸æ˜¯ç¡¬ç¼–ç **
   ```yaml
   # Good
   path: "{{ config_dir }}/config.yaml"
   
   # Bad
   path: /etc/rancher/rke2/config.yaml
   ```

4. **æ·»åŠ æ¡ä»¶åˆ¤æ–­**
   ```yaml
   when: ansible_os_family == "Debian"
   ```

### YAML æ ¼å¼

```yaml
# ä½¿ç”¨ 2 ç©ºæ ¼ç¼©è¿›
---
- name: ä»»åŠ¡åç§°
  module:
    param1: value1
    param2: value2
  when: condition
  tags:
    - tag1
```

### æ–‡æ¡£è§„èŒƒ

1. **README æ›´æ–°**ï¼šæ–°åŠŸèƒ½éœ€è¦æ›´æ–° README
2. **æ–‡æ¡£æ³¨é‡Š**ï¼šå…³é”®é…ç½®æ·»åŠ æ³¨é‡Š
3. **ç¤ºä¾‹ä»£ç **ï¼šæä¾›ä½¿ç”¨ç¤ºä¾‹
4. **ä¸­è‹±æ–‡**ï¼šé‡è¦æ–‡æ¡£æä¾›ä¸­è‹±æ–‡ç‰ˆæœ¬

## Pull Request è§„èŒƒ

### PR æ ‡é¢˜

ä½¿ç”¨æ¸…æ™°çš„æ ‡é¢˜ï¼Œè¯´æ˜æ”¹åŠ¨å†…å®¹ï¼š

- `feat: æ·»åŠ  K3S ç¦»çº¿å®‰è£…æ”¯æŒ`
- `fix: ä¿®å¤ä¸­å›½é•œåƒæºé…ç½®é—®é¢˜`
- `docs: æ›´æ–°å®‰è£…æŒ‡å—`
- `refactor: é‡æ„é¢„æ£€æŸ¥é€»è¾‘`
- `test: æ·»åŠ å‡çº§æµ‹è¯•ç”¨ä¾‹`

### PR æè¿°æ¨¡æ¿

```markdown
## æ”¹åŠ¨è¯´æ˜
<!-- æè¿°è¿™ä¸ª PR åšäº†ä»€ä¹ˆ -->

## æ”¹åŠ¨ç±»å‹
- [ ] Bug ä¿®å¤
- [ ] æ–°åŠŸèƒ½
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] ä»£ç é‡æ„
- [ ] æµ‹è¯•

## æµ‹è¯•
<!-- å¦‚ä½•æµ‹è¯•è¿™äº›æ”¹åŠ¨ï¼Ÿ -->

## ç›¸å…³ Issue
<!-- å…³è”çš„ Issue ç¼–å·ï¼Œä¾‹å¦‚: Fixes #123 -->

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] å·²æ·»åŠ å¿…è¦çš„æ–‡æ¡£
- [ ] å·²é€šè¿‡æ‰€æœ‰æµ‹è¯•
- [ ] å·²æ›´æ–° CHANGELOG
```

## æµ‹è¯•æŒ‡å—

### æœ¬åœ°æµ‹è¯•

```bash
# è¯­æ³•æ£€æŸ¥
make lint

# é…ç½®éªŒè¯
make validate

# å¹²è·‘æµ‹è¯•
make test

# å®é™…éƒ¨ç½²æµ‹è¯•ï¼ˆä½¿ç”¨æµ‹è¯•ç¯å¢ƒï¼‰
INVENTORY=inventory/test.ini make install
```

### æµ‹è¯•ç¯å¢ƒ

å»ºè®®ä½¿ç”¨ä»¥ä¸‹å·¥å…·åˆ›å»ºæµ‹è¯•ç¯å¢ƒï¼š

- **Vagrant**: æœ¬åœ°è™šæ‹Ÿæœº
- **Docker**: å®¹å™¨æµ‹è¯•
- **äº‘å¹³å°**: AWS/GCP/Azure æµ‹è¯•å®ä¾‹

### æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] å•èŠ‚ç‚¹å®‰è£…
- [ ] HA é›†ç¾¤å®‰è£…
- [ ] Server + Agent æ··åˆæ¨¡å¼
- [ ] å‡çº§æµ‹è¯•
- [ ] å¤‡ä»½å’Œæ¢å¤
- [ ] å¸è½½æµ‹è¯•
- [ ] ä¸­å›½é•œåƒæºæµ‹è¯•
- [ ] å¤šæ“ä½œç³»ç»Ÿæµ‹è¯•
- [ ] å¤šæ¶æ„æµ‹è¯• (amd64/arm64)

## ç‰ˆæœ¬å‘å¸ƒ

### è¯­ä¹‰åŒ–ç‰ˆæœ¬

éµå¾ª [Semantic Versioning](https://semver.org/)ï¼š

- **MAJOR**: ä¸å…¼å®¹çš„ API æ”¹åŠ¨
- **MINOR**: å‘åå…¼å®¹çš„åŠŸèƒ½æ–°å¢
- **PATCH**: å‘åå…¼å®¹çš„ Bug ä¿®å¤

### å‘å¸ƒæµç¨‹

1. æ›´æ–° `CHANGELOG.md`
2. æ›´æ–°ç‰ˆæœ¬å·
3. åˆ›å»º Git Tag
4. å‘å¸ƒ Release Notes

## ç¤¾åŒº

### äº¤æµæ¸ é“

- GitHub Issues: Bug æŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚
- GitHub Discussions: ä¸€èˆ¬è®¨è®º
- Slack: å®æ—¶äº¤æµï¼ˆå¦‚æœ‰ï¼‰

### è¡Œä¸ºå‡†åˆ™

- å°Šé‡æ‰€æœ‰è´¡çŒ®è€…
- å»ºè®¾æ€§çš„åé¦ˆ
- å‹å¥½å’ŒåŒ…å®¹
- ä¸“ä¸šçš„æ€åº¦

## é—®é¢˜ï¼Ÿ

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿ï¼š

1. æŸ¥çœ‹ç°æœ‰ Issues
2. é˜…è¯»æ–‡æ¡£
3. æå‡ºæ–° Issue
4. å‘é€é‚®ä»¶: devops@example.com

---

å†æ¬¡æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼ ğŸ‰
